# Explicitly allow ingress traffic to the web app 
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-ingress-to-web-app
spec:
  podSelector:
    matchLabels:
      app: aks-test-webapp
  policyTypes:
    - Ingress
  ingress:
    # Allow traffic from the Application Gateway/AGIC (assuming it's in the same cluster or specific CIDRs)
    # This is a crucial security measure to limit who can connect to your pods directly.
    - from:
      - ipBlock:
          cidr: "10.0.0.0/64" 
      ports:
        - protocol: TCP
          port: 80